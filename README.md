# wc-meta

Плагин WordPress для вывода ряда свойств объектов WooCOmmerce в виде мета-свойств страницы.
Необходим для интеграции с рядом служб, например, с anyQuery.

## Требования

- WordPress 5.7 или выше
- PHP 7.4 или выше
- WooCommerce (активный)

## Установка

1. Скопируйте папку плагина в директорию `wp-content/plugins/` вашего сайта WordPress.
2. Активируйте плагин через админку WordPress (раздел «Плагины»).
3. Убедитесь, что WooCommerce активен.

## Основные функции и архитектура

- **wc_meta\\Plugin** — основной класс плагина. Инициализирует обработчики мета-свойств и регистрирует их вывод в `<head>` через хук `wp_head`.
- **wc_meta\\WC_Meta_Page** — абстрактный базовый класс для всех обработчиков мета-свойств. Определяет интерфейс:
  - `is_active()` — определяет, активен ли обработчик на текущей странице.
  - `output_meta()` — выводит нужные мета-свойства в `<head>`.
- **wc_meta\\WC_Meta_ThankYou** — обработчик для страницы "Спасибо за заказ". Выводит мета-свойства заказа: статус, сумму и ID покупателя (если есть).

### Как работает

1. При инициализации плагина создаётся объект `Plugin`, который регистрирует обработчики (например, `WC_Meta_ThankYou`).
2. На каждом рендере страницы вызывается метод `handle()`, который определяет, какой обработчик активен, и выводит соответствующие мета-свойства в `<head>`.
3. Для добавления новых типов страниц создайте класс-наследник от `WC_Meta_Page` и добавьте его в массив `$handlers` в классе `Plugin`.
